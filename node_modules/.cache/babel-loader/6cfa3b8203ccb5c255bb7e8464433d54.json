{"ast":null,"code":"var _jsxFileName = \"/Users/ludofederici/neurohackathon/src/pages/Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport useEffectOnce from \"react-use/lib/useEffectOnce\";\nimport { LoginForm } from \"../components/LoginForm\";\nimport { Footer } from \"../components/Footer\";\nimport { notion, useNotion } from \"../services/notion\";\nexport function Login() {\n  const {\n    user,\n    lastSelectedDeviceId,\n    setSelectedDevice\n  } = useNotion();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\n  useEffectOnce(() => {\n    if (user) {\n      navigate(\"/\");\n    }\n  });\n  useEffect(() => {\n    if (email && password) {\n      login();\n    }\n    async function login() {\n      setIsLoggingIn(true);\n      const auth = await notion.login({\n        email,\n        password\n      }).catch(error => {\n        setError(error.message);\n      });\n      if (auth) {\n        resetForm();\n        if (lastSelectedDeviceId) {\n          navigate(\"/\");\n        } else {\n          navigate(\"/devices\");\n        }\n      }\n      setIsLoggingIn(false);\n    }\n  }, [email, password, setError, lastSelectedDeviceId, setSelectedDevice]);\n  function onLogin({\n    email,\n    password\n  }) {\n    if (email && password) {\n      setError(\"\");\n      setEmail(email);\n      setPassword(password);\n    } else {\n      setError(\"Please fill the form\");\n    }\n  }\n  function resetForm() {\n    setError(\"\");\n    setEmail(\"\");\n    setPassword(\"\");\n  }\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"main-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LoginForm, {\n    onLogin: onLogin,\n    error: error,\n    loading: isLoggingIn,\n    footerComponent: /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 26\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"names":["React","useState","useEffect","navigate","useEffectOnce","LoginForm","Footer","notion","useNotion","Login","user","lastSelectedDeviceId","setSelectedDevice","email","setEmail","password","setPassword","error","setError","isLoggingIn","setIsLoggingIn","login","auth","catch","message","resetForm","onLogin","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","loading","footerComponent"],"sources":["/Users/ludofederici/neurohackathon/src/pages/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport useEffectOnce from \"react-use/lib/useEffectOnce\";\n\nimport { LoginForm } from \"../components/LoginForm\";\nimport { Footer } from \"../components/Footer\";\n\nimport { notion, useNotion } from \"../services/notion\";\n\nexport function Login() {\n  const { user, lastSelectedDeviceId, setSelectedDevice } = useNotion();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\n\n  useEffectOnce(() => {\n    if (user) {\n      navigate(\"/\");\n    }\n  });\n\n  useEffect(() => {\n    if (email && password) {\n      login();\n    }\n\n    async function login() {\n      setIsLoggingIn(true);\n      const auth = await notion\n        .login({ email, password })\n        .catch((error) => {\n          setError(error.message);\n        });\n\n      if (auth) {\n        resetForm();\n\n        if (lastSelectedDeviceId) {\n          navigate(\"/\");\n        } else {\n          navigate(\"/devices\");\n        }\n      }\n      setIsLoggingIn(false);\n    }\n  }, [\n    email,\n    password,\n    setError,\n    lastSelectedDeviceId,\n    setSelectedDevice\n  ]);\n\n  function onLogin({ email, password }) {\n    if (email && password) {\n      setError(\"\");\n      setEmail(email);\n      setPassword(password);\n    } else {\n      setError(\"Please fill the form\");\n    }\n  }\n\n  function resetForm() {\n    setError(\"\");\n    setEmail(\"\");\n    setPassword(\"\");\n  }\n\n  return (\n    <main className=\"main-container\">\n      <LoginForm\n        onLogin={onLogin}\n        error={error}\n        loading={isLoggingIn}\n        footerComponent={<Footer />}\n      />\n    </main>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}