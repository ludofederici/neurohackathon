{"ast":null,"code":"var _jsxFileName = \"/Users/ludofederici/neurosity_hackathon/notion-react-starter/src/pages/Focus.js\";\nimport React, { useState, useEffect } from 'react';\nimport { navigate } from '@reach/router';\nimport { Line } from 'react-chartjs-2';\nimport { notion, useNotion } from '../services/notion';\nimport { Nav } from '../components/Nav';\nexport function Focus() {\n  const {\n    user\n  } = useNotion();\n  const [focus, setFocus] = useState(0);\n  const [focusHistory, setFocusHistory] = useState([]);\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n    }\n  }, [user]);\n  useEffect(() => {\n    if (!user) {\n      return;\n    }\n    const subscription = notion.focus().subscribe(focusData => {\n      const focusScore = Math.trunc(focusData.probability * 100);\n      setFocus(focusScore);\n      setFocusHistory(prevFocusHistory => [...prevFocusHistory, focusScore]);\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [user]);\n  const data = {\n    labels: focusHistory.map((_, index) => index + 1),\n    datasets: [{\n      label: 'Focus Score',\n      data: focusHistory,\n      fill: false,\n      backgroundColor: 'rgb(75, 192, 192)',\n      borderColor: 'rgba(75, 192, 192, 0.2)'\n    }]\n  };\n  const options = {\n    scales: {\n      y: {\n        beginAtZero: true\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"main-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, user ? /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"focus-score\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"\\xA0\", focus, \"% \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"focus-word\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 24\n    }\n  }, \"Focus\"), /*#__PURE__*/React.createElement(Line, {\n    data: data,\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"names":["React","useState","useEffect","navigate","Line","notion","useNotion","Nav","Focus","user","focus","setFocus","focusHistory","setFocusHistory","subscription","subscribe","focusData","focusScore","Math","trunc","probability","prevFocusHistory","unsubscribe","data","labels","map","_","index","datasets","label","fill","backgroundColor","borderColor","options","scales","y","beginAtZero","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/ludofederici/neurosity_hackathon/notion-react-starter/src/pages/Focus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { navigate } from '@reach/router';\nimport { Line } from 'react-chartjs-2';\nimport { notion, useNotion } from '../services/notion';\nimport { Nav } from '../components/Nav';\n\nexport function Focus() {\n  const { user } = useNotion();\n  const [focus, setFocus] = useState(0);\n  const [focusHistory, setFocusHistory] = useState([]);\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (!user) {\n      return;\n    }\n\n    const subscription = notion.focus().subscribe((focusData) => {\n      const focusScore = Math.trunc(focusData.probability * 100);\n      setFocus(focusScore);\n      setFocusHistory((prevFocusHistory) => [...prevFocusHistory, focusScore]);\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [user]);\n\n  const data = {\n    labels: focusHistory.map((_, index) => index + 1),\n    datasets: [\n      {\n        label: 'Focus Score',\n        data: focusHistory,\n        fill: false,\n        backgroundColor: 'rgb(75, 192, 192)',\n        borderColor: 'rgba(75, 192, 192, 0.2)',\n      },\n    ],\n  };\n\n  const options = {\n    scales: {\n      y: {\n        beginAtZero: true,\n      },\n    },\n  };\n\n  return (\n    <main className=\"main-container\">\n      {user ? <Nav /> : null}\n      <div className=\"focus-score\">\n        &nbsp;{focus}% <div className=\"focus-word\">Focus</div>\n        <Line data={data} options={options} />\n      </div>\n    </main>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}